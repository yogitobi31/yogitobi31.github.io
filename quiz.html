<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ë³„ë°”ëŒ í…ŒìŠ¤íŠ¸ ì‹œì‘</title>
<meta name="description" content="15ë¬¸í•­ ì„±í–¥ ê¸°ë°˜, ë‚˜ë§Œì˜ ì´ë¦„ê³¼ ì¹´ë“œ í¬ìŠ¤í„°ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”."/>
<link rel="icon" type="image/png" sizes="512x512" href="favicon-512.png" />
<style>
  :root{
    --ink:#1f2937; --muted:#6b7280; --brand:#ef6b8c; --bg:#fffdf8; --card:#ffffff;
    --line:#f1f5f9; --ok:#10b981; --warn:#f59e0b;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);
    font-family:system-ui,-apple-system,"Noto Sans KR","Apple SD Gothic Neo",Roboto,Arial,sans-serif}
  a{color:#2563EB;text-decoration:none}
  a:hover{text-decoration:underline}

  .container{max-width:960px;margin:0 auto;padding:20px 16px}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px}
  .brand{font-weight:900;letter-spacing:.2px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:18px;padding:18px;
        box-shadow:0 10px 24px rgba(0,0,0,.06)}

  .hero{display:grid;grid-template-columns:1.1fr 1fr;gap:22px;align-items:center}
  @media (max-width:900px){.hero{grid-template-columns:1fr}}

  .title{font-size:26px;margin:0 0 6px}
  .lead{color:var(--muted);margin:0 0 12px}

  /* Progress */
  .progress{height:10px;background:#fff;border:1px solid var(--line);border-radius:999px;overflow:hidden}
  .bar{height:100%;width:0%;background:linear-gradient(90deg,#ef6b8c,#f6ad55);transition:width .35s ease}

  /* Q pager */
  .qwrap{margin-top:14px;min-height:320px;position:relative}
  .qcard{border:1px solid var(--line);border-radius:16px;padding:18px;background:#fff;box-shadow:0 8px 18px rgba(0,0,0,.05);
         position:absolute;inset:0;opacity:0;transform:translateY(10px);pointer-events:none;transition:.28s ease}
  .qcard.active{opacity:1;transform:translateY(0);pointer-events:auto}
  .qhead{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .qindex{font-weight:800;color:#ef6b8c}
  .qtext{font-size:18px;margin:12px 0 14px}

  /* Scale pills */
  .scale{display:flex;flex-wrap:wrap;gap:10px}
  input[type="radio"]{display:none}
  .pill{display:flex;align-items:center;gap:8px;padding:12px 14px;border-radius:14px;border:1.5px solid #e5e7eb;
        background:#f9fafb;cursor:pointer;font-weight:700;user-select:none;transition:.2s ease}
  .pill .em{font-size:18px}
  input[type="radio"]:checked + .pill{border-color:#ef6b8c;background:#fff;box-shadow:0 6px 14px rgba(239,107,140,.18)}

  /* Actions */
  .actions{display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;margin-top:16px}
  .btn{border:0;border-radius:12px;padding:12px 16px;font-weight:800;cursor:pointer}
  .btn.primary{background:var(--brand);color:#fff;box-shadow:0 10px 20px rgba(239,107,140,.25)}
  .btn.ghost{background:#f3f4f6}
  .hint{font-size:12px;color:#9CA3AF;margin-top:8px}
  .err{display:none;margin-top:8px;color:#b91c1c;font-weight:700}

  /* Footer */
  footer{margin:26px 0 40px;color:#9CA3AF;text-align:center}
</style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">â­ ë³„ë°”ëŒ</div>
      <nav class="badges" style="display:flex;gap:10px;flex-wrap:wrap">
        <a class="badge" href="index.html">í™ˆ</a>
        <a class="badge" href="privacy.html">ê°œì¸ì •ë³´</a>
        <a class="badge" href="terms.html">ì•½ê´€</a>
      </nav>
    </header>

    <section class="hero">
      <div class="card">
        <h1 class="title">ë‚˜ì˜ ì„±í–¥ìœ¼ë¡œ íƒ„ìƒí•˜ëŠ” ì´ë¦„ âœ¨</h1>
        <p class="lead">15ë¬¸í•­ Â· ì•½ 1ë¶„ Â· ê²°ê³¼ëŠ” ë‚´ ê¸°ê¸°ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤. ì™„ë£Œí•˜ë©´ <b>ê³ í•´ìƒë„ ì¹´ë“œ í¬ìŠ¤í„°</b>ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ìš”.</p>
        <div class="progress" aria-label="ì§„í–‰ë„">
          <div id="bar" class="bar" style="width:0%"></div>
        </div>

        <div class="qwrap" id="qwrap">
          <!-- ì§ˆë¬¸ ì¹´ë“œê°€ JSë¡œ ë“¤ì–´ì˜µë‹ˆë‹¤ -->
        </div>

        <div class="actions">
          <button class="btn ghost" id="prevBtn" type="button">â† ì´ì „</button>
          <div style="display:flex;gap:8px">
            <button class="btn" id="skipBtn" type="button" style="background:#fff;border:1px solid #e5e7eb">ê±´ë„ˆë›°ê¸°</button>
            <button class="btn primary" id="nextBtn" type="button">ë‹¤ìŒ â†’</button>
            <button class="btn primary" id="submitBtn" type="button" style="display:none">ê²°ê³¼ ë³´ê¸°</button>
          </div>
        </div>
        <div id="err" class="err">ëª¨ë“  ë¬¸í•­ì— ì‘ë‹µí•´ ì£¼ì„¸ìš”.</div>
        <div class="hint">* ì‘ë‹µì€ ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•Šìœ¼ë©°, ë¸Œë¼ìš°ì € ë¡œì»¬ì €ì¥ì†Œì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.</div>
      </div>

      <div aria-hidden="true">
        <img src="assets/og_default.png" alt="" style="width:100%;border-radius:18px;border:1px solid #eee;box-shadow:0 8px 20px rgba(0,0,0,.06)"/>
        <div style="margin-top:10px;color:#6b7280;font-size:14px">
          <b>íŒ:</b> ë„ˆë¬´ ê³ ë¯¼í•˜ì§€ ë§ê³  <u>ì²« ëŠë‚Œ</u>ëŒ€ë¡œ ì„ íƒí•˜ë©´ ë” ì¬ë°Œì–´ìš”!
        </div>
      </div>
    </section>
  </div>

  <footer>Â© ë³„ë°”ëŒ</footer>

  <script>
    // ===== ì§ˆë¬¸ ì •ì˜ (ì¶• ë§¤í•‘ ë™ì¼) =====
    const ITEMS = [
      { id:'q1',  axis:'free',   text:'ìƒˆë¡œìš´ ì¥ì†Œë¥¼ ì¦‰í¥ì ìœ¼ë¡œ ë– ë‚˜ëŠ” í¸ì´ë‹¤.' },
      { id:'q2',  axis:'extra',  text:'ì²˜ìŒ ë§Œë‚˜ëŠ” ì‚¬ëŒê³¼ë„ ì‰½ê²Œ ëŒ€í™”í•œë‹¤.' },
      { id:'q3',  axis:'lively', text:'í•˜ë£¨ì— í•´ì•¼ í•  ì¼ì„ ë¹ ë¥¸ ì†ë„ë¡œ ì²˜ë¦¬í•œë‹¤.' },
      { id:'q4',  axis:'warm',   text:'ê°€ê¹Œìš´ ì‚¬ëŒë“¤ì˜ ê°ì • ë³€í™”ì— ë¯¼ê°í•˜ë‹¤.' },
      { id:'q5',  axis:'dreamy', text:'ê³µìƒ/ìƒìƒì„ ìì£¼ í•˜ê³  ì¦ê¸´ë‹¤.' },
      { id:'q6',  axis:'free',   text:'ê³„íšë³´ë‹¤ íë¦„ì„ ë”°ë¥´ëŠ” í¸ì´ë‹¤.' },
      { id:'q7',  axis:'extra',  text:'ëª¨ì„ì—ì„œ ì´ì•¼ê¸°ì˜ ì¤‘ì‹¬ì´ ë˜ëŠ” í¸ì´ë‹¤.' },
      { id:'q8',  axis:'lively', text:'í™œë™ì ì¸ ì·¨ë¯¸ë¥¼ ì„ í˜¸í•œë‹¤.' },
      { id:'q9',  axis:'warm',   text:'ëŒë´„/ë°°ë ¤ê°€ ì¤‘ìš”í•œ ê°€ì¹˜ë¼ê³  ëŠë‚€ë‹¤.' },
      { id:'q10', axis:'dreamy', text:'ì˜ˆìˆ /ê°ì„± ì½˜í…ì¸ ë¥¼ ì¦ê²¨ ê°ìƒí•œë‹¤.' },
      { id:'q11', axis:'free',   text:'ìƒˆ ê·œì¹™ì„ ë³´ë©´ ê°œì„  ì•„ì´ë””ì–´ê°€ ë¨¼ì € ë– ì˜¤ë¥¸ë‹¤.' },
      { id:'q12', axis:'extra',  text:'ë‹¨ì²´ í™œë™ì—ì„œ ì—ë„ˆì§€ë¥¼ ì–»ëŠ”ë‹¤.' },
      { id:'q13', axis:'lively', text:'í•´ì•¼ í•  ì¼ì„ ë¯¸ë£¨ëŠ” í¸ì´ ì•„ë‹ˆë‹¤.' },
      { id:'q14', axis:'warm',   text:'ì¶©ëŒë³´ë‹¤ í™”í•´ë¥¼ ìš°ì„ í•œë‹¤.' },
      { id:'q15', axis:'dreamy', text:'ë°¤í•˜ëŠ˜/ìì—°ì„ ë³´ë©° ìƒê°ì— ì ê¸°ê³¤ í•œë‹¤.' }
    ];
    const SCALE = [
      {v:1, em:'ğŸ˜¶',  label:'ì „í˜€ ì•„ë‹ˆë‹¤'},
      {v:2, em:'ğŸ™',  label:'ì•„ë‹Œ í¸'},
      {v:3, em:'ğŸ˜',  label:'ë³´í†µ'},
      {v:4, em:'ğŸ™‚',  label:'ê·¸ëŸ° í¸'},
      {v:5, em:'ğŸ˜',  label:'ë§¤ìš° ê·¸ë ‡ë‹¤'},
    ];

    // ===== ë Œë”ë§ =====
    const wrap = document.getElementById('qwrap');
    let cur = 0;
    const answers = {}; // id -> 1~5

    function makeCard(it, idx){
      const div = document.createElement('div');
      div.className = 'qcard' + (idx===0 ? ' active' : '');
      div.setAttribute('data-idx', idx);
      div.innerHTML = `
        <div class="qhead">
          <div class="qindex">Q${idx+1} / ${ITEMS.length}</div>
        </div>
        <div class="qtext">${it.text}</div>
        <div class="scale">
          ${SCALE.map(s => `
            <label>
              <input type="radio" name="${it.id}" value="${s.v}">
              <span class="pill"><span class="em">${s.em}</span>${s.label}</span>
            </label>
          `).join('')}
        </div>
      `;
      // ê¸°ì¡´ ì‘ë‹µ ë³µì›
      div.querySelectorAll('input[type="radio"]').forEach(inp=>{
        inp.addEventListener('change', ()=>{
          answers[it.id] = Number(inp.value);
          updateButtons();
        });
        if (answers[it.id] && Number(inp.value)===answers[it.id]) inp.checked = true;
      });
      return div;
    }

    function renderAll(){
      wrap.innerHTML = '';
      ITEMS.forEach((it,idx)=>wrap.appendChild(makeCard(it, idx)));
      updateProgress(); updateButtons();
    }

    function show(idx){
      cur = Math.max(0, Math.min(ITEMS.length-1, idx));
      document.querySelectorAll('.qcard').forEach((el,i)=>{
        el.classList.toggle('active', i===cur);
      });
      updateProgress(); updateButtons();
    }

    function updateProgress(){
      const bar = document.getElementById('bar');
      const done = Object.keys(answers).length;
      const base = Math.max(done, cur); // í˜„ì¬ ì¹´ë“œì— ë„ë‹¬í•œ ë§Œí¼ í‘œì‹œ
      const p = Math.round((base)/ITEMS.length*100);
      bar.style.width = p + '%';
    }

    function updateButtons(){
      document.getElementById('prevBtn').disabled = (cur===0);
      document.getElementById('skipBtn').style.display = (answers[ITEMS[cur].id] ? 'none':'inline-flex');
      const last = (cur===ITEMS.length-1);
      document.getElementById('nextBtn').style.display = last ? 'none':'inline-flex';
      document.getElementById('submitBtn').style.display = last ? 'inline-flex':'none';
      document.getElementById('err').style.display = 'none';
    }

    // ===== ê³„ì‚°/ì €ì¥ =====
    function computeAxes(){
      const sums = {free:0, extra:0, lively:0, warm:0, dreamy:0};
      const counts = {free:0, extra:0, lively:0, warm:0, dreamy:0};
      for (const it of ITEMS){
        const v = Number(answers[it.id]||0);
        if (!v) continue;
        sums[it.axis]+=v; counts[it.axis]+=1;
      }
      const axes = {};
      for (const k of Object.keys(sums)){
        const avg = counts[k] ? (sums[k]/counts[k]) : 3;
        const norm = (avg-1)/4; // 1~5 â†’ 0~1
        axes[k] = Math.max(0, Math.min(1, norm));
      }
      return axes;
    }

    function submit(){
      // ê²€ì¦: í•˜ë‚˜ë¼ë„ ë¹ ì§€ë©´ ê²½ê³ 
      const missing = ITEMS.filter(it=>!answers[it.id]).length;
      if (missing>0){
        document.getElementById('err').style.display='block';
        return;
      }
      const payload = { axes: computeAxes(), ts: Date.now() };
      try{ localStorage.setItem('resultPayload', JSON.stringify(payload)); }catch(_){}
      location.href = 'result.html';
    }

    // ===== ì´ë²¤íŠ¸ =====
    document.getElementById('prevBtn').addEventListener('click', ()=>show(cur-1));
    document.getElementById('nextBtn').addEventListener('click', ()=>{
      // í˜„ì¬ ì¹´ë“œ ì‘ë‹µ ì—†ìœ¼ë©´ ì‚´ì§ í”ë“¤ê¸° ëŒ€ì‹  ê²½ê³ 
      if (!answers[ITEMS[cur].id]) {
        document.getElementById('err').style.display='block';
        return;
      }
      show(cur+1);
    });
    document.getElementById('skipBtn').addEventListener('click', ()=>show(cur+1));
    document.getElementById('submitBtn').addEventListener('click', submit);

    // ìµœì´ˆ ë Œë”
    renderAll();

    // ë’¤ë¡œê°€ê¸° ì‹œ ìŠ¤í¬ë¡¤ ë§¨ ìœ„
    window.history.scrollRestoration = 'manual';
  </script>
</body>
</html>
