<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë³„ë°”ëŒ ì´ë¦„ í…ŒìŠ¤íŠ¸</title>
  <meta name="description" content="15ë¬¸í•­ ì„±í–¥ í…ŒìŠ¤íŠ¸ ê¸°ë°˜ ê·€ì—¬ìš´ ìºë¦­í„°ì™€ ì˜í˜¼ì˜ ì´ë¦„ ìƒì„±ê¸°" />
  <link rel="icon" type="image/png" sizes="512x512" href="favicon-512.png" />
  <link rel="stylesheet" href="style.css" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4918757223156683" crossorigin="anonymous"></script>
</head>
<body>
  <header class="container">
    <h1>ë³„ë°”ëŒ ì´ë¦„ í…ŒìŠ¤íŠ¸</h1>
    <p class="sub">15ë¬¸í•­ìœ¼ë¡œ ì„±í–¥ì„ ì•Œì•„ë³´ê³  <strong>ì˜í˜¼ì˜ ì´ë¦„</strong>ê³¼ <strong>ê·€ì—¬ìš´ ìºë¦­í„°</strong>ë¥¼ ë°›ì•„ë³´ì„¸ìš”.</p>
  </header>

  <main class="container card">
    <form id="quizForm">
      <div id="quizRoot"></div>
      <div class="actions">
        <button type="button" id="prevBtn" class="btn ghost">ì´ì „</button>
        <button type="button" id="nextBtn" class="btn">ë‹¤ìŒ</button>
        <button type="submit" id="submitBtn" class="btn primary hidden">ê²°ê³¼ ë³´ê¸°</button>
      </div>
      <div class="progress"><div id="bar"></div></div>
    </form>
  </main>

  <section class="container ad card"><div class="ad-placeholder">ì—¬ê¸°ì— ê´‘ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤</div></section>
  <footer class="container footer"><a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> Â· <a href="terms.html">ì´ìš©ì•½ê´€</a></footer>

  <!-- JSë¥¼ ë‚´ë¶€ì— ë„£ì–´ ê²½ë¡œ ë¬¸ì œ ì œê±° -->
  <script>
    const QUESTIONS = [
      {axis:'free',   q:'ë‚˜ëŠ” ìƒˆë¡œìš´ ì¥ì†Œë¡œ í›Œì© ë– ë‚˜ëŠ” ìƒìƒì„ ìì£¼ í•œë‹¤.'},
      {axis:'free',   q:'ê³„íš ì—†ì´ ì›€ì§ì´ëŠ” í¸ì´ë‹¤.'},
      {axis:'free',   q:'ììœ  ì‹œê°„ì´ ë§ì„ìˆ˜ë¡ ì—ë„ˆì§€ê°€ ì°¨ì˜¤ë¥¸ë‹¤.'},
      {axis:'extra',  q:'ì²˜ìŒ ë³¸ ì‚¬ëŒê³¼ë„ ê¸ˆë°© ì´ì•¼ê¸°í•˜ëŠ” í¸ì´ë‹¤.'},
      {axis:'extra',  q:'ì—¬ëŸ¿ì´ ëª¨ì¸ ìë¦¬ì—ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ë¦¬ë“œí•œë‹¤.'},
      {axis:'extra',  q:'ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ìˆì„ ë•Œ ë” ì¦ê²ë‹¤.'},
      {axis:'lively', q:'ìƒˆë¡œìš´ ì·¨ë¯¸ë¥¼ ê¸ˆë°© ì‹œë„í•´ ë³¸ë‹¤.'},
      {axis:'lively', q:'ê¸°ë‹¤ë¦¬ëŠ” ê²ƒë³´ë‹¤ ì›€ì§ì´ëŠ” ê±¸ ì„ í˜¸í•œë‹¤.'},
      {axis:'lively', q:'ê°€ë§Œíˆ ìˆìœ¼ë©´ ê¸ˆë°© ì‹¬ì‹¬í•´ì§„ë‹¤.'},
      {axis:'warm',   q:'ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ë§ˆìŒì„ ìì£¼ ì‹ ê²½ ì“´ë‹¤.'},
      {axis:'warm',   q:'ê·€ì—¬ìš´ ê²ƒë“¤ì„ ë³´ë©´ ê¸°ë¶„ì´ ì¢‹ì•„ì§„ë‹¤.'},
      {axis:'warm',   q:'ìƒëƒ¥í•˜ë‹¤ëŠ” ë§ì„ ìì£¼ ë“£ëŠ”ë‹¤.'},
      {axis:'dreamy', q:'ì°½ë°–ì„ ë©í•˜ë‹ˆ ë³´ë©° ìƒê°ì— ì ê¸¸ ë•Œê°€ ë§ë‹¤.'},
      {axis:'dreamy', q:'ê°ì„±ì ì¸ ìŒì•…/ì˜í™”ë¥¼ ì¢‹ì•„í•œë‹¤.'},
      {axis:'dreamy', q:'í˜„ì‹¤ì  ì´ë“ë³´ë‹¤ ë¶„ìœ„ê¸°ë¥¼ ì¤‘ì‹œí•  ë•Œê°€ ìˆë‹¤.'}
    ];
    const PER_PAGE = 5;
    const root = document.getElementById('quizRoot');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const bar = document.getElementById('bar');
    let page = 0;
    const answers = Array(QUESTIONS.length).fill(null);

    function render() {
      root.innerHTML = '';
      const start = page * PER_PAGE;
      const slice = QUESTIONS.slice(start, start + PER_PAGE);
      slice.forEach((q, i) => {
        const idx = start + i;
        const wrap = document.createElement('div');
        wrap.className = 'question';
        wrap.innerHTML = `<div>${idx+1}. ${q.q}</div>`;
        const opts = document.createElement('div'); opts.className = 'options';
        for (let k=1; k<=5; k++) {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'option' + (answers[idx]===k ? ' selected' : '');
          btn.textContent = k===1 ? 'ì „í˜€ì•„ë‹˜' : (k===5 ? 'ë§¤ìš°ê·¸ë ‡ë‹¤' : (''+k));
          btn.onclick = () => { answers[idx] = k; render(); };
          opts.appendChild(btn);
        }
        wrap.appendChild(opts);
        root.appendChild(wrap);
      });
      prevBtn.disabled = page===0;
      const last = Math.ceil(QUESTIONS.length/PER_PAGE) - 1;
      nextBtn.classList.toggle('hidden', page===last);
      submitBtn.classList.toggle('hidden', page!==last);
      const filled = answers.filter(v=>v!==null).length;
      bar.style.width = Math.round((filled/QUESTIONS.length)*100)+'%';
    }
    prevBtn.onclick = ()=>{ if (page>0){ page--; render(); } };
    nextBtn.onclick = ()=>{
      const start = page * PER_PAGE;
      const anyMissing = QUESTIONS.slice(start, start + PER_PAGE)
        .some((_,i)=>answers[start+i]==null);
      if (anyMissing){ alert('ì´ í˜ì´ì§€ì˜ ë¬¸í•­ì— ëª¨ë‘ ë‹µí•´ì£¼ì„¸ìš” ğŸ™‚'); return; }
      page++; render();
    };
    document.getElementById('quizForm').onsubmit = (e)=>{
      e.preventDefault();
      if (answers.some(v=>v===null)){ alert('ëª¨ë“  ë¬¸í•­ì— ë‹µí•´ì£¼ì„¸ìš”!'); return; }
      const axes = {free:0, extra:0, lively:0, warm:0, dreamy:0};
      const counts = {free:0, extra:0, lively:0, warm:0, dreamy:0};
      QUESTIONS.forEach((q,i)=>{ axes[q.axis]+=answers[i]; counts[q.axis]++; });
      Object.keys(axes).forEach(k=>{ axes[k] = axes[k]/(counts[k]*5); }); // 0..1
      const payload = {axes, ts: Date.now(), seed: cryptoSeed(), ver: 1};
      localStorage.setItem('resultPayload', JSON.stringify(payload));
      location.href = 'result.html';
    };
    function cryptoSeed(){
      if (window.crypto && crypto.getRandomValues){
        const arr = new Uint32Array(4); crypto.getRandomValues(arr);
        return Array.from(arr).join('-');
      }
      return String(Math.random()).slice(2);
    }
    render();
  </script>
</body>
</html>

